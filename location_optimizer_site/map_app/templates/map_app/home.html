{% extends 'map_app/base.html' %}

{% block main_content %}

<script>
    var mykey = config.MY_KEY;
    var secretkey = config.SECRET_KEY;

    function pr() {
            alert(document.getElementById('address').value)
            document.getElementById("result").innerHTML = document.getElementById('address').value
    }

    var potentialAddresses = "{{potentialAddresses}}";

</script>

<div class="container">
  <div class="jumbotron" style="height:100%;">

{% if user.is_authenticated %}
  <p>Welcome, {{ user.username }}. Thanks for logging in.</p>
{% else %}
  <p>Welcome, new user. Please log in.</p>
{% endif %}


<div class=container-fluid">
   <div class="col-sm-12 text-right">
        <input id="data_delete"
               class="btn btn-info btn-lg" type="button"
               value="Delete existing data"  >
   </div>
</div>


<h2> Enter details for the potential site</h2>

<p>Import excel file with the headings: <b>Address, Rent</b></p>

<form method="post" id="csv1" enctype="multipart/form-data">{% csrf_token %}

    <input type="file" name="potentialSitesFile" />
    <input type="submit" value="Upload"/>

</form>
<br>
{%  if central %}
      {% if broken_addresses %}
        <p>Upload successful! {{central_length}} addresses were uploaded. The
        following addresses could not be processed:</p>
        <table  class="table table-striped">
        <thead>
            <th>Potential Site</th>
        </thead>
        {% for site in broken_addresses %}
          <tr>
              <td>{{site}}</td>
          </tr>
            {% endfor %}
        </table>
      {% else %}
        <p>Upload successful! {{central_length}} addresses were uploaded.</p>
     {% endif %}
{% endif %}
<br>

<h2> Enter details for the collection locations</h2>
<p>Import excel file with the headings: <b>Location,Transport Type,Deliveries per Month</b> (This may take a few seconds to process)</p>

<form  method="post" id="csv2" enctype="multipart/form-data">{% csrf_token %}
    <!--#from https://gist.github.com/imkevinxu/3365661-->

    <input type="file" name="collectionFile" />
    <input type="submit" value="Upload" />

</form>
<br>
{% if collections %}
      {% if broken_routes %}
        <p>Upload successful! {{collections_length}} addresses were uploaded.
            The following addresses could not be processed:</p>
        <table  class="table table-striped">
        <thead>
            <th>Collection Site</th>
        </thead>
        {% for site in broken_routes %}
          <tr>
              <td>{{site}}</td>
          </tr>
        {% endfor %}
        </table>
      {% else %}
        <p>Upload successful! {{collections_length}} collection
            addresses were uploaded.</p>
      {% endif %}
{% endif %}
<br>

<h2> Enter details for the transport classes</h2>
<p>Import excel file with the headings: <b>Transport class, Cost per km</b></p>

<form method="post" id="csv3" enctype="multipart/form-data">{% csrf_token %}

    <input type="file" name="transportClassFile" />
    <input type="submit" value="Upload"/>

</form>
<br>
{%  if transport %}
    <p>Upload successful! {{transport_length}} transport types were uploaded.</p>
{% endif %}

      </div>
</div>

<div class=container-fluid">
   <div class="col-sm-12 text-center">
    <form  action="{% url 'map_app:otherLocations'  %}" method=post">  {% csrf_token %}
        <input id="index_next" class="btn btn-info btn-lg" type="submit" value="Next" >
    </form>
   </div>
</div>

{% endblock %}